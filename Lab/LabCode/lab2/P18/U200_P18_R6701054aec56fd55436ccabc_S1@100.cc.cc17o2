#include "Solution.h"
vector<int> Solution::perfect_permutation(int n) {
    vector<int> ans;
    int a[2048],pow=1;
    a[1]=1;
    while(pow<=n)
    {
        for(int i=pow+1;i<=pow<<1;++i) a[i]=a[i-pow]<<1;
        for(int i=1;i<=pow;++i) a[i]=a[i+pow]-1;
        pow<<=1;
    }
    for(int i=1;i<=pow;++i) if(a[i]<=n) ans.push_back(a[i]);
    return ans;
}